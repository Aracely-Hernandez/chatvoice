
# Interview module for Bella chatbot
# Leslie Janine González Blancas - María del Carmen olivares Bautista
# IIMAS-UNAM Dr. Ivan Vladimir Meza Ruiz

settings:
    name: BELLA
 
conversations:
    - 'motivation.yaml'

slots:
    - name
    - weight_goal
    - weight_ini
    - height
    - preference_spicy
    - preference_salty
    - preference_sweet
    - preference_seafood
    - preference_coffe
    - preference_tea
    - preference_soup
    - preference_purchase
    - talk_time
    - day_time
    - reminder

#   - weight_actual
#   - weight_new

    - eslot

plugins:
    - random_motivation
    - prueba2

strategies:
    name:
        - say "¿Cúal es tu nombre?"
        - solve validateRead
#       - ahorrin.setSlot("usuario",eslot)
        - input name 
        - remember name
#	error con la definicion referenciada antes de la asignacion
#	- prueba2.procesa_watson(name)
    IMC:
        - say "Antes que nada ¿cuál es tu estatura en centímetros?"
        - solve validateRead
        - input height = eslot
        - remember height
        - say "adios {}".format(eslot)
        - say "¿Me puedes decir cuál es el peso que deseas alcanzar?"
        - input weight_goal
        - remember weight_goal
        - say "¿y cuanto es lo que pesas hoy?"
        - input weight_ini
        - remember weight_ini
        - say "Para cuando terminemos ni los recordarás. No te preocupes."

    preference:
        - say "Picosa"
        - input preference_spicy
        - remember preference_spicy
        - say "Salada"
        - input preference_salty
        - remember preference_salty
        - say "Dulce"
        - input preference_sweet
        - remember preference_sweet
        - say "Mariscos"
        - input preference_seafood
        - remember preference_seafood
        - say "Café"
        - input preference_coffee
        - remember preference_coffee
        - say "Te"
        - input preference_tea
        - remember preference_tea
        - say "Caldos"
        - input preference_soup
        - remember preference_soup

    preference_purchase:
        - say "Usualmente,¿tu comida es preparada o comprada?"
        - input preference_purchase

    resolve_preference:
       - say "Ahora, continuemos con tus gustos."
       - say "Dime del 1 al 5 que tanto te gusta la comida…"
       - solve preference  
       - say "Esto me sirve para saber que tipo de comida es más de tu agrado." 
       - if float(preference_spicy) <3 say "Veo que no te gusta tanto lo picoso"
       - if not float(preference_spicy) <3 say "Veo que sí te gusta lo picoso"
       - if float(preference_salty) < float(preference_sweet) say "y que prefieres lo dulce a lo salado."
       - if not float(preference_salty) < float(preference_sweet) say "y que prefieres lo salado a lo dulce."
       - if float(preference_seafood) < 3 say "Noto que no eres gran fan de la comida del mar "
       - if not float(preference_seafood) < 3 say "Noto que sí te agrada la comida del mar "
       - if float(preference_soup) < 3 say "aunque, no mucho los caldos"
       - if not float(preference_soup) < 3 say "aunque, sí los caldos"

    talk_time:
        - say "¿En que hora del dia te gustaria que platiquemos?"
        - input talk_time
        - remember talk_time
    day_time:
        - say "¿De la noche?"
        - input day_time
        - remember day_time
    reminder:
        - say "¿Quieres que te programe un recordatorio?"
        - input reminder
        - remember reminder
#https://github.com/ivanvladimir/chatvoice/blob/raspberry/conversations/ahorrinUser.yaml
#alli está la validacion de UNK 


    validateRead:
#        - input eslot
        - if eslot == "UNK" say "Lo siento, no entendí lo último que me dijiste, puedes repetírmelo?"
        - if eslot == "UNK" solve validateRead


script:

    - say "Mi nombre es Bella y voy a ayudarte a alcanzar tu peso ideal."
    - solve name
    - say "mucho gusto en conocerte {}".format(name)
    - say "Yo sé que pondrás mucho esfuerzo para cumplir tu meta."
    - say "Necesito que platiquemos un poco de ella para que esté más enterada y te pueda apoyar aún mejor"
    - solve  IMC
#    - say "adios {}".format(eslot) 
#    Adecuar tabla de pesos que establescan una relacion SANA de lo que mide y lo que quiere pesar
#    Para que, en caso de que quiera pesar mucho menos de lo que debería, marcarle/decirle una advertencia
#    Ej." Hay veces que nos sentimos presionados para ser algo que no somos, tal vez no sea necesario tanto. 
#    ¿Que te parece si lo establecemos en <PESO_ADECUADO_SUGERIDO_SEGUN_SU_ESTATURA> (por esta vez) (que es 
#    la maxima meta alcanzable)? (Ya despues veremos cómo vamos)"
#    _talvez_preguntar_por_una_afirmacion_
#    Ej." Solo recordandote que en este periodo de 6 semanas, nuestra meta máxima son 12/8 (escoger segun hombre/mujer)"
    - solve resolve_preference
    - solve preference_purchase
    - if not preference_purchase =='preparada' say "Ojalá pronto pueda recomendarte lugares en donde comer y seguir al pie de la letra tu dieta, mientras te sugeriré los platillos que tal vez puedas ordenar a donde vayas para que ni así falles."
    - say "adios {}".format(name) 






 
